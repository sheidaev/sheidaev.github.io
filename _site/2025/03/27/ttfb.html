<!DOCTYPE html><html lang="en" dir="ltr"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta http-equiv="X-UA-Compatible" content="ie=edge"><title>Time To First Byte (TTFB) та його кент 103 Early Hints | Блог перформанс-інженера Костянтина Шейдаєва</title><meta name="description" content="Блог перформанс-інженера Костянтина Шейдаєва. Тут матюкаються і говорять про перформанс-інженірінг."><link rel="shortcut icon" href="/assets/favicon.ico" type="image/x-icon"><link rel="icon" href="/assets/favicon.ico" type="image/x-icon"><link href='/feed.xml' rel='alternate' type='application/atom+xml'><link rel="canonical" href="/2025/03/27/ttfb.html"><link rel="stylesheet" href="/assets/style.css"> <!-- Google tag (gtag.js) --> <script async src="https://www.googletagmanager.com/gtag/js?id=G-3PKYF558LM"></script> <script> window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'G-3PKYF558LM'); </script><body><main> <!DOCTYPE html><html lang="en" dir="ltr"><header><h2 class="title">Блог перформанс-інженера Костянтина Шейдаєва</h2><nav><p> <a href="https://sheidaev.com">Головна</a> <a href="https://sheidaev.com/blog">Блог</a> <a href="https://sheidaev.com/study">Програми навчання</a> <a href="https://sheidaev.com/about">Про мене</a></p></nav></header><h1>Time To First Byte (TTFB) та його кент 103 Early Hints</h1><i>Mar 27, 2025</i><h4 class="subtitle"></h4><p><strong>TTFB</strong> - простими словами, це час, який проходить між моментом, коли браузер відправляє запит на сервер, та моментом, коли він отримує перший байт даних у відповідь.</p><p>Вважається, що “ровний пацан” має TTFB &lt; 800мс, а якщо TTFB &gt; 1800мс, то “пацан більше неровний”.</p><div style="text-align: center;"> <img src="/assets/images/ttfb/ttfb-good-bad.png" alt="TTFB Good vs Bad" /></div><p>При цьому, якщо орієнтуватись на світові тренди, потрапити в 18% “школоти” дуже не хочеться:</p><p><img src="/assets/images/ttfb/ttfb-trend.png" alt="TTFB Trends" /></p><p>Тож давайте розберемося, як ця метрика вираховується і як її оптимізувати.</p><h2 id="як-вираховується-і-з-чого-складається">Як вираховується і з чого складається?</h2><p><img src="/assets/images/ttfb/ttfb-schema.png" alt="TTFB Schema" /></p><p><strong>TTFB</strong> - це сума наступних фаз запиту:</p><ol><li><strong>Час на перенаправлення (redirect)</strong><ul><li>Зазвичай дуже малий, якщо є - від 10-50мс<li>Часто відсутній взагалі</ul><li><strong>Час на запуск Service Worker</strong><ul><li>Якщо використовується - від 5-20мс<li>Більшість сайтів не використовують</ul><li><strong>Час на отримання IP-адреси (DNS lookup)</strong><ul><li>Зазвичай 20-100мс<li>Може бути більшим при проблемах з DNS<li>Часто кешується</ul><li><strong>Час на встановлення з’єднання (TLS)</strong><ul><li>Від 50-200мс<li>Залежить від відстані до сервера</ul><li><strong>Час до першого байту відповіді</strong><ul><li>Це найбільша частина - 70-90% від загального TTFB<li>Включає:<ul><li>Час обробки запиту на сервері<li>Час генерації відповіді<li>Час передачі даних по мережі</ul></ul></ol><p>На цьому етапі стає зрозуміло, що успіх складається з двох компонентів:</p><ol><li>Займатися оптимізацією бекенду і мережевої інфраструктури (для зменшення часу до першого байту відповіді)<li>Використовувати Early Hints, щоб винести час обробки запиту на сервері “за душки”</ol><h2 id="що-таке-early-hints">Що таке Early Hints?</h2><p>HTTP 103 Early Hints - статусний код HTTP, який дозволяє серверу відправляти попередні відповіді браузеру до того, як буде готова основна відповідь.</p><h3 id="як-це-працює">Як це працює?</h3><p><img src="/assets/images/ttfb/compare-early-hints.png" alt="Early hints" /></p><p>Однак, не всі браузери підтримують 103 статус, тому потрібна fallback стратегія. Це означає, що потрібно мати запасний варіант на випадок, якщо браузер не підтримує цю функцію.</p><h2 id="висновок">Висновок</h2><p><strong>TTFB</strong> - одна з ключових метрік у Core Web Vitals, отже, вона напряму впливає на ранжування вашого сайту в пошуковій видачі.<br /> Звісно, правильний шлях - впливати на неї через оптимізацію швидкості обробки запитів на сервері. (впевний ви це робите, ви ж прийшли читати цю хуйню)<br /> Але, якщо треба швидкі результати, то цю метрику можна трошки наїбати використовуючи Early Hints, не забуваючи про fallback.</p></main>
